{"remainingRequest":"/Users/shiraishi/my-blog/node_modules/babel-loader/lib/index.js??ref--3-1!/Users/shiraishi/my-blog/node_modules/vuepress-plugin-redirect/lib/enhanceApp.js","dependencies":[{"path":"/Users/shiraishi/my-blog/node_modules/vuepress-plugin-redirect/lib/enhanceApp.js","mtime":1589563522587},{"path":"/Users/shiraishi/my-blog/node_modules/cache-loader/dist/cjs.js","mtime":1589563520756},{"path":"/Users/shiraishi/my-blog/node_modules/babel-loader/lib/index.js","mtime":1589563520696}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmluZCI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmluY2x1ZGVzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkubWFwIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuc2xpY2UiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5zb21lIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LmtleXMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5yZWdleHAuZXhlYyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5pbmNsdWRlcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5yZXBsYWNlIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLnNwbGl0IjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLnN0YXJ0cy13aXRoIjsKaW1wb3J0IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyIGZyb20gIi9Vc2Vycy9zaGlyYWlzaGkvbXktYmxvZy9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlciI7CmltcG9ydCBfdHlwZW9mIGZyb20gIi9Vc2Vycy9zaGlyYWlzaGkvbXktYmxvZy9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vdHlwZW9mIjsKaW1wb3J0IHsgam9pbiB9IGZyb20gJ3BhdGgnOyAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L2Jhbi10cy1pZ25vcmUKLy8gQHRzLWlnbm9yZQoKaW1wb3J0IHBsdWdpblJlZGlyZWN0T3B0aW9ucyBmcm9tICdAZHluYW1pYy9wbHVnaW4tcmVkaXJlY3Qtb3B0aW9ucyc7CnZhciBvcHRpb25zID0gcGx1Z2luUmVkaXJlY3RPcHRpb25zOwoKdmFyIGVuaGFuY2VBcHAgPSBmdW5jdGlvbiBlbmhhbmNlQXBwKF9yZWYpIHsKICB2YXIgcm91dGVyID0gX3JlZi5yb3V0ZXIsCiAgICAgIHNpdGVEYXRhID0gX3JlZi5zaXRlRGF0YTsKICB2YXIgX3JvdXRlciRvcHRpb25zJHJvdXRlID0gcm91dGVyLm9wdGlvbnMucm91dGVzLAogICAgICByb3V0ZXMgPSBfcm91dGVyJG9wdGlvbnMkcm91dGUgPT09IHZvaWQgMCA/IFtdIDogX3JvdXRlciRvcHRpb25zJHJvdXRlOwogIHZhciBfb3B0aW9ucyRyZWRpcmVjdG9ycyA9IG9wdGlvbnMucmVkaXJlY3RvcnMsCiAgICAgIHJhd1JlZGlyZWN0b3JzID0gX29wdGlvbnMkcmVkaXJlY3RvcnMgPT09IHZvaWQgMCA/IFtdIDogX29wdGlvbnMkcmVkaXJlY3RvcnM7IC8vIGlmIGEgcGF0aCBoYXMgY29ycmVzcG9uZGluZyByb3V0ZQoKICBmdW5jdGlvbiBoYXNSb3V0ZShwYXRoKSB7CiAgICByZXR1cm4gcm91dGVzLnNvbWUoZnVuY3Rpb24gKHJvdXRlKSB7CiAgICAgIHJldHVybiByb3V0ZS5wYXRoLnRvTG93ZXJDYXNlKCkgPT09IHBhdGgudG9Mb3dlckNhc2UoKTsKICAgIH0pOwogIH0gLy8gZ2V0IHRoZSByb3V0ZSBvciBmYWxsYmFjayByb3V0ZSBvZiBhIHBhdGgKCgogIGZ1bmN0aW9uIGdldEZhbGxiYWNrUm91dGUocGF0aCkgewogICAgLy8gaWYgaGFzIGV4YWN0IHJvdXRlCiAgICBpZiAoaGFzUm91dGUocGF0aCkpIHJldHVybiBwYXRoOyAvLyBpZiBoYXMgcm91dGUgd2l0aCAvCgogICAgaWYgKCEvXC8kLy50ZXN0KHBhdGgpKSB7CiAgICAgIHZhciBlbmRpbmdTbGFzaFVybCA9IHBhdGggKyAnLyc7CiAgICAgIGlmIChoYXNSb3V0ZShlbmRpbmdTbGFzaFVybCkpIHJldHVybiBlbmRpbmdTbGFzaFVybDsKICAgIH0gLy8gaWYgaGFzIHJvdXRlIHdpdGggLmh0bWwKCgogICAgaWYgKCEvXC5odG1sJC8udGVzdChwYXRoKSkgewogICAgICB2YXIgZW5kaW5nSHRtbFVybCA9IHBhdGgucmVwbGFjZSgvXC8kLywgJycpICsgJy5odG1sJzsKICAgICAgaWYgKGhhc1JvdXRlKGVuZGluZ0h0bWxVcmwpKSByZXR1cm4gZW5kaW5nSHRtbFVybDsKICAgIH0KCiAgICByZXR1cm4gbnVsbDsKICB9IC8vIGxvY2FsZXMgcmVkaXJlY3RvcgoKCiAgaWYgKG9wdGlvbnMubG9jYWxlcyAmJiBzaXRlRGF0YS5sb2NhbGVzKSB7CiAgICAvLyByZXNvbHZlIGxvY2FsZXMgY29uZmlnIGZyb20gc2l0ZURhdGEKICAgIHZhciBzaXRlTG9jYWxlcyA9IHNpdGVEYXRhLmxvY2FsZXM7CiAgICB2YXIgbG9jYWxlS2V5cyA9IE9iamVjdC5rZXlzKHNpdGVMb2NhbGVzKTsKICAgIHZhciBsb2NhbGVzID0gbG9jYWxlS2V5cy5tYXAoZnVuY3Rpb24gKGtleSkgewogICAgICByZXR1cm4gewogICAgICAgIGtleToga2V5LnJlcGxhY2UoL15cL3xcLyQvLCAnJyksCiAgICAgICAgbGFuZzogc2l0ZUxvY2FsZXNba2V5XS5sYW5nCiAgICAgIH07CiAgICB9KTsgLy8gcmVzb2x2ZSBsb2NhbGVzIGNvbmZpZyBmcm9tIHBsdWdpbiBvcHRpb25zCgogICAgaWYgKF90eXBlb2Yob3B0aW9ucy5sb2NhbGVzKSAhPT0gJ29iamVjdCcpIHsKICAgICAgb3B0aW9ucy5sb2NhbGVzID0ge307CiAgICB9CgogICAgdmFyIF9vcHRpb25zJGxvY2FsZXMgPSBvcHRpb25zLmxvY2FsZXMsCiAgICAgICAgZmFsbGJhY2sgPSBfb3B0aW9ucyRsb2NhbGVzLmZhbGxiYWNrLAogICAgICAgIF9vcHRpb25zJGxvY2FsZXMkc3RvciA9IF9vcHRpb25zJGxvY2FsZXMuc3RvcmFnZSwKICAgICAgICBzdG9yYWdlID0gX29wdGlvbnMkbG9jYWxlcyRzdG9yID09PSB2b2lkIDAgPyB0cnVlIDogX29wdGlvbnMkbG9jYWxlcyRzdG9yOwoKICAgIGlmIChmYWxsYmFjaykgewogICAgICBsb2NhbGVLZXlzLnVuc2hpZnQoZmFsbGJhY2spOwogICAgfSAvLyBhZGQgbG9jYWxlcyByZWRpcmVjdG9yCgoKICAgIHJhd1JlZGlyZWN0b3JzLnVuc2hpZnQoewogICAgICBzdG9yYWdlOiBzdG9yYWdlLAogICAgICBiYXNlOiAnLycsCiAgICAgIGFsdGVybmF0aXZlOiBmdW5jdGlvbiBhbHRlcm5hdGl2ZSgpIHsKICAgICAgICBpZiAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgJiYgd2luZG93Lm5hdmlnYXRvcikgewogICAgICAgICAgdmFyIGxhbmdzID0gd2luZG93Lm5hdmlnYXRvci5sYW5ndWFnZXMgfHwgW3dpbmRvdy5uYXZpZ2F0b3IubGFuZ3VhZ2VdOwogICAgICAgICAgdmFyIGxvY2FsZSA9IGxvY2FsZXMuZmluZChmdW5jdGlvbiAoX3JlZjIpIHsKICAgICAgICAgICAgdmFyIGxhbmcgPSBfcmVmMi5sYW5nOwogICAgICAgICAgICByZXR1cm4gbGFuZ3MuaW5jbHVkZXMobGFuZyk7CiAgICAgICAgICB9KTsKCiAgICAgICAgICBpZiAobG9jYWxlKSB7CiAgICAgICAgICAgIHJldHVybiBsb2NhbGUua2V5OwogICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIGxvY2FsZUtleXM7CiAgICAgIH0KICAgIH0pOwogIH0gLy8gYWxsIHJlZGlyZWN0b3JzCgoKICB2YXIgcmVkaXJlY3RvcnMgPSByYXdSZWRpcmVjdG9ycy5tYXAoZnVuY3Rpb24gKF9yZWYzKSB7CiAgICB2YXIgX3JlZjMkYmFzZSA9IF9yZWYzLmJhc2UsCiAgICAgICAgYmFzZSA9IF9yZWYzJGJhc2UgPT09IHZvaWQgMCA/ICcvJyA6IF9yZWYzJGJhc2UsCiAgICAgICAgX3JlZjMkc3RvcmFnZSA9IF9yZWYzLnN0b3JhZ2UsCiAgICAgICAgcmF3U3RvcmFnZSA9IF9yZWYzJHN0b3JhZ2UgPT09IHZvaWQgMCA/IGZhbHNlIDogX3JlZjMkc3RvcmFnZSwKICAgICAgICBhbHRlcm5hdGl2ZSA9IF9yZWYzLmFsdGVybmF0aXZlOwogICAgdmFyIHN0b3JhZ2UgPSBmYWxzZTsKCiAgICBpZiAocmF3U3RvcmFnZSkgewogICAgICBpZiAoX3R5cGVvZihyYXdTdG9yYWdlKSAhPT0gJ29iamVjdCcpIHsKICAgICAgICB2YXIga2V5ID0gdHlwZW9mIHJhd1N0b3JhZ2UgIT09ICdzdHJpbmcnID8gInZ1ZXByZXNzOnJlZGlyZWN0OiIuY29uY2F0KGJhc2UpIDogcmF3U3RvcmFnZTsKICAgICAgICBzdG9yYWdlID0gewogICAgICAgICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7CiAgICAgICAgICAgIGlmICh0eXBlb2YgbG9jYWxTdG9yYWdlID09PSAndW5kZWZpbmVkJykgcmV0dXJuIG51bGw7CiAgICAgICAgICAgIHJldHVybiBsb2NhbFN0b3JhZ2UuZ2V0SXRlbShrZXkpOwogICAgICAgICAgfSwKICAgICAgICAgIHNldDogZnVuY3Rpb24gc2V0KHZhbCkgewogICAgICAgICAgICBpZiAodHlwZW9mIGxvY2FsU3RvcmFnZSA9PT0gJ3VuZGVmaW5lZCcpIHJldHVybjsKICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oa2V5LCB2YWwpOwogICAgICAgICAgfQogICAgICAgIH07CiAgICAgIH0gZWxzZSBpZiAocmF3U3RvcmFnZS5nZXQgJiYgcmF3U3RvcmFnZS5zZXQpIHsKICAgICAgICAvLyB3YXJuaW5nCiAgICAgICAgc3RvcmFnZSA9IHJhd1N0b3JhZ2U7CiAgICAgIH0KICAgIH0KCiAgICByZXR1cm4gewogICAgICBiYXNlOiBiYXNlLAogICAgICBzdG9yYWdlOiBzdG9yYWdlLAogICAgICBhbHRlcm5hdGl2ZTogYWx0ZXJuYXRpdmUKICAgIH07CiAgfSk7CiAgcm91dGVyLmJlZm9yZUVhY2goZnVuY3Rpb24gKHRvLCBmcm9tLCBuZXh0KSB7CiAgICAvLyBpZiByb3V0ZXIgZXhpc3RzLCBza2lwIHJlZGlyZWN0aW9uCiAgICB2YXIgZmFsbGJhY2sgPSBnZXRGYWxsYmFja1JvdXRlKHRvLnBhdGgpOwogICAgaWYgKGZhbGxiYWNrKSByZXR1cm4gbmV4dCgpOwogICAgdmFyIHRhcmdldDsKCiAgICB2YXIgX2l0ZXJhdG9yID0gX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXIocmVkaXJlY3RvcnMpLAogICAgICAgIF9zdGVwOwoKICAgIHRyeSB7CiAgICAgIGZvciAoX2l0ZXJhdG9yLnMoKTsgIShfc3RlcCA9IF9pdGVyYXRvci5uKCkpLmRvbmU7KSB7CiAgICAgICAgdmFyIHJlZGlyZWN0b3IgPSBfc3RlcC52YWx1ZTsKCiAgICAgICAgdmFyIF9yZWRpcmVjdG9yJGJhc2UgPSByZWRpcmVjdG9yLmJhc2UsCiAgICAgICAgICAgIGJhc2UgPSBfcmVkaXJlY3RvciRiYXNlID09PSB2b2lkIDAgPyAnLycgOiBfcmVkaXJlY3RvciRiYXNlLAogICAgICAgICAgICBfcmVkaXJlY3RvciRzdG9yYWdlID0gcmVkaXJlY3Rvci5zdG9yYWdlLAogICAgICAgICAgICBfc3RvcmFnZSA9IF9yZWRpcmVjdG9yJHN0b3JhZ2UgPT09IHZvaWQgMCA/IGZhbHNlIDogX3JlZGlyZWN0b3Ikc3RvcmFnZTsKCiAgICAgICAgdmFyIGFsdGVybmF0aXZlID0gcmVkaXJlY3Rvci5hbHRlcm5hdGl2ZTsKICAgICAgICBpZiAoIXRvLnBhdGguc3RhcnRzV2l0aChiYXNlKSkgY29udGludWU7IC8vIGdldCByZXN0IG9mIHRoZSBwYXRoCiAgICAgICAgLy8gZW5zdXJlIGVuZGluZyBzbGFzaCBhdCByb290CgogICAgICAgIHZhciByZXN0ID0gdG8ucGF0aC5zbGljZShiYXNlLmxlbmd0aCkgfHwgJy8nOwoKICAgICAgICBpZiAoX3N0b3JhZ2UpIHsKICAgICAgICAgIHZhciBhbHQgPSBfc3RvcmFnZS5nZXQocmVkaXJlY3Rvcik7CgogICAgICAgICAgaWYgKGFsdCkgewogICAgICAgICAgICB2YXIgcGF0aCA9IGdldEZhbGxiYWNrUm91dGUoam9pbihiYXNlLCBhbHQsIHJlc3QpKTsKCiAgICAgICAgICAgIGlmIChwYXRoKSB7CiAgICAgICAgICAgICAgdGFyZ2V0ID0gcGF0aDsKICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0gLy8gcmVzb2x2ZSBhbHRlcm5hdGl2ZXMKCgogICAgICAgIGlmICh0eXBlb2YgYWx0ZXJuYXRpdmUgPT09ICdmdW5jdGlvbicpIHsKICAgICAgICAgIGFsdGVybmF0aXZlID0gYWx0ZXJuYXRpdmUocmVzdCk7CiAgICAgICAgfQoKICAgICAgICBpZiAoIWFsdGVybmF0aXZlKSBjb250aW51ZTsKCiAgICAgICAgaWYgKHR5cGVvZiBhbHRlcm5hdGl2ZSA9PT0gJ3N0cmluZycpIHsKICAgICAgICAgIGFsdGVybmF0aXZlID0gW2FsdGVybmF0aXZlXTsKICAgICAgICB9CgogICAgICAgIHZhciBfaXRlcmF0b3IyID0gX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXIoYWx0ZXJuYXRpdmUpLAogICAgICAgICAgICBfc3RlcDI7CgogICAgICAgIHRyeSB7CiAgICAgICAgICBmb3IgKF9pdGVyYXRvcjIucygpOyAhKF9zdGVwMiA9IF9pdGVyYXRvcjIubigpKS5kb25lOykgewogICAgICAgICAgICB2YXIgX2FsdCA9IF9zdGVwMi52YWx1ZTsKCiAgICAgICAgICAgIHZhciBfcGF0aCA9IGdldEZhbGxiYWNrUm91dGUoam9pbihiYXNlLCBfYWx0LCByZXN0KSk7CgogICAgICAgICAgICBpZiAoX3BhdGgpIHsKICAgICAgICAgICAgICB0YXJnZXQgPSBfcGF0aDsKICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0gY2F0Y2ggKGVycikgewogICAgICAgICAgX2l0ZXJhdG9yMi5lKGVycik7CiAgICAgICAgfSBmaW5hbGx5IHsKICAgICAgICAgIF9pdGVyYXRvcjIuZigpOwogICAgICAgIH0KCiAgICAgICAgaWYgKHRhcmdldCkgYnJlYWs7CiAgICAgIH0KICAgIH0gY2F0Y2ggKGVycikgewogICAgICBfaXRlcmF0b3IuZShlcnIpOwogICAgfSBmaW5hbGx5IHsKICAgICAgX2l0ZXJhdG9yLmYoKTsKICAgIH0KCiAgICBuZXh0KHRhcmdldCk7CiAgfSk7CiAgcm91dGVyLmFmdGVyRWFjaChmdW5jdGlvbiAodG8pIHsKICAgIC8vIGlmIHJvdXRlciBkb2Vzbid0IGV4aXN0LCBza2lwIHN0b3JhZ2UKICAgIGlmICghaGFzUm91dGUodG8ucGF0aCkpIHJldHVybjsKCiAgICB2YXIgX2l0ZXJhdG9yMyA9IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyKHJlZGlyZWN0b3JzKSwKICAgICAgICBfc3RlcDM7CgogICAgdHJ5IHsKICAgICAgZm9yIChfaXRlcmF0b3IzLnMoKTsgIShfc3RlcDMgPSBfaXRlcmF0b3IzLm4oKSkuZG9uZTspIHsKICAgICAgICB2YXIgcmVkaXJlY3RvciA9IF9zdGVwMy52YWx1ZTsKICAgICAgICB2YXIgYmFzZSA9IHJlZGlyZWN0b3IuYmFzZSwKICAgICAgICAgICAgX3N0b3JhZ2UyID0gcmVkaXJlY3Rvci5zdG9yYWdlOwogICAgICAgIGlmICghX3N0b3JhZ2UyIHx8ICF0by5wYXRoLnN0YXJ0c1dpdGgoYmFzZSkpIGNvbnRpbnVlOwogICAgICAgIHZhciBhbHQgPSB0by5wYXRoLnNsaWNlKGJhc2UubGVuZ3RoKS5zcGxpdCgnLycpWzBdOwoKICAgICAgICBpZiAoYWx0KSB7CiAgICAgICAgICBfc3RvcmFnZTIuc2V0KGFsdCwgcmVkaXJlY3Rvcik7CiAgICAgICAgfQogICAgICB9CiAgICB9IGNhdGNoIChlcnIpIHsKICAgICAgX2l0ZXJhdG9yMy5lKGVycik7CiAgICB9IGZpbmFsbHkgewogICAgICBfaXRlcmF0b3IzLmYoKTsKICAgIH0KICB9KTsKfTsKCmV4cG9ydCBkZWZhdWx0IGVuaGFuY2VBcHA7"},{"version":3,"sources":["../src/enhanceApp.ts"],"names":[],"mappings":"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","sourceRoot":"","sourcesContent":["import { join } from 'path';\n// eslint-disable-next-line @typescript-eslint/ban-ts-ignore\n// @ts-ignore\nimport pluginRedirectOptions from '@dynamic/plugin-redirect-options';\nconst options = pluginRedirectOptions;\nconst enhanceApp = ({ router, siteData }) => {\n    const { routes = [] } = router.options;\n    const { redirectors: rawRedirectors = [] } = options;\n    // if a path has corresponding route\n    function hasRoute(path) {\n        return routes.some(route => route.path.toLowerCase() === path.toLowerCase());\n    }\n    // get the route or fallback route of a path\n    function getFallbackRoute(path) {\n        // if has exact route\n        if (hasRoute(path))\n            return path;\n        // if has route with /\n        if (!/\\/$/.test(path)) {\n            const endingSlashUrl = path + '/';\n            if (hasRoute(endingSlashUrl))\n                return endingSlashUrl;\n        }\n        // if has route with .html\n        if (!/\\.html$/.test(path)) {\n            const endingHtmlUrl = path.replace(/\\/$/, '') + '.html';\n            if (hasRoute(endingHtmlUrl))\n                return endingHtmlUrl;\n        }\n        return null;\n    }\n    // locales redirector\n    if (options.locales && siteData.locales) {\n        // resolve locales config from siteData\n        const siteLocales = siteData.locales;\n        const localeKeys = Object.keys(siteLocales);\n        const locales = localeKeys.map(key => ({\n            key: key.replace(/^\\/|\\/$/, ''),\n            lang: siteLocales[key].lang,\n        }));\n        // resolve locales config from plugin options\n        if (typeof options.locales !== 'object') {\n            options.locales = {};\n        }\n        const { fallback, storage = true } = options.locales;\n        if (fallback) {\n            localeKeys.unshift(fallback);\n        }\n        // add locales redirector\n        rawRedirectors.unshift({\n            storage,\n            base: '/',\n            alternative() {\n                if (typeof window !== 'undefined' && window.navigator) {\n                    const langs = window.navigator.languages || [\n                        window.navigator.language,\n                    ];\n                    const locale = locales.find(({ lang }) => langs.includes(lang));\n                    if (locale) {\n                        return locale.key;\n                    }\n                }\n                return localeKeys;\n            },\n        });\n    }\n    // all redirectors\n    const redirectors = rawRedirectors.map(({ base = '/', storage: rawStorage = false, alternative }) => {\n        let storage = false;\n        if (rawStorage) {\n            if (typeof rawStorage !== 'object') {\n                const key = typeof rawStorage !== 'string'\n                    ? `vuepress:redirect:${base}`\n                    : rawStorage;\n                storage = {\n                    get() {\n                        if (typeof localStorage === 'undefined')\n                            return null;\n                        return localStorage.getItem(key);\n                    },\n                    set(val) {\n                        if (typeof localStorage === 'undefined')\n                            return;\n                        localStorage.setItem(key, val);\n                    },\n                };\n            }\n            else if (rawStorage.get && rawStorage.set) {\n                // warning\n                storage = rawStorage;\n            }\n        }\n        return {\n            base,\n            storage,\n            alternative,\n        };\n    });\n    router.beforeEach((to, from, next) => {\n        // if router exists, skip redirection\n        const fallback = getFallbackRoute(to.path);\n        if (fallback)\n            return next();\n        let target;\n        for (const redirector of redirectors) {\n            const { base = '/', storage = false } = redirector;\n            let { alternative } = redirector;\n            if (!to.path.startsWith(base))\n                continue;\n            // get rest of the path\n            // ensure ending slash at root\n            const rest = to.path.slice(base.length) || '/';\n            if (storage) {\n                const alt = storage.get(redirector);\n                if (alt) {\n                    const path = getFallbackRoute(join(base, alt, rest));\n                    if (path) {\n                        target = path;\n                        break;\n                    }\n                }\n            }\n            // resolve alternatives\n            if (typeof alternative === 'function') {\n                alternative = alternative(rest);\n            }\n            if (!alternative)\n                continue;\n            if (typeof alternative === 'string') {\n                alternative = [alternative];\n            }\n            for (const alt of alternative) {\n                const path = getFallbackRoute(join(base, alt, rest));\n                if (path) {\n                    target = path;\n                    break;\n                }\n            }\n            if (target)\n                break;\n        }\n        next(target);\n    });\n    router.afterEach(to => {\n        // if router doesn't exist, skip storage\n        if (!hasRoute(to.path))\n            return;\n        for (const redirector of redirectors) {\n            const { base, storage } = redirector;\n            if (!storage || !to.path.startsWith(base))\n                continue;\n            const alt = to.path.slice(base.length).split('/')[0];\n            if (alt) {\n                storage.set(alt, redirector);\n            }\n        }\n    });\n};\nexport default enhanceApp;\n//# sourceMappingURL=enhanceApp.js.map"]}]}